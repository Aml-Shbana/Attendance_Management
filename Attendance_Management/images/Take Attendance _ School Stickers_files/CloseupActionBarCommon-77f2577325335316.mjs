(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["55759"],{257775:function(e,t,a){var i;a.r(t),a.d(t,{default:()=>n});let o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCanPerformAction_board",selections:[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:[i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collaboratedByMe",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collaboratorPermissions",storageKey:null}],type:"Board",abstractKey:null};o.hash="416539a057718ff36ac5d9d06916c2d4";let n=o},130442:function(e,t,a){a.r(t),a.d(t,{default:()=>Z});var i=a(667294),o=a(616550),n=a(883119),s=a(141871),r=a(724985),l=a(481671),d=a(290852),c=a(752031),p=a(898514),u=a(746868),h=a(470205),m=a(138596),g=a(765603),y=a(575820),_=a(462867),b=a(200619),v=a(601871),f=a(15392),x=a(133546),w=a(632492),P=a(386385),A=a(504727),k=a(271245),S=a(785893);let I=(0,k.Z)(()=>Promise.all([a.e("74924"),a.e("26877"),a.e("63529"),a.e("64701")]).then(a.bind(a,521663)),void 0,e=>521663,"SaveAffordance"),j=(0,k.Z)(()=>Promise.resolve().then(a.bind(a,299234)),void 0,e=>299234,"SecondarySendButtonCommon"),C=(0,k.Z)(()=>Promise.all([a.e("25418"),a.e("89558"),a.e("96415")]).then(a.bind(a,872901)),void 0,e=>872901,"ReactionPickerContainer"),R=(0,k.Z)(()=>a.e("8419").then(a.bind(a,78316)),void 0,e=>78316,"CloseupCommentButton"),T=(0,k.Z)(()=>Promise.resolve().then(a.bind(a,765603)),void 0,e=>765603,"ReactionAggregationWrapper"),E=(0,k.Z)(()=>Promise.resolve().then(a.bind(a,724985)),void 0,e=>724985,"MoreOptionsDropdown"),O=new n.Ry(5);function Z({goBack:e,gridDescription:t,isDeletedStoryPin:a,isEligibleForPinReactions:k,isOnSecretBoard:Z,onEditSubmit:B,pin:D,viewParameter:M,viewType:H,onSaveButtonClick:z,showRepinOnInitialRender:N,isStoryPin:W,actionBarContainerRef:K,outerPaddingSize:L=f.g9,maxWidth:F,showLeadPin:G}){let U=(0,m.ZP)(),q=(0,o.TH)(),Y=(0,b.Z)(),{showEnabledSaveBehavior:V}=(0,A.Yh)(!0),{imgSrc:X}=(0,c.r)(),{clientTrackingParams:$,isCloseupRelatedPinsAboveTheFoldEnabled:J,showCloseupContentRight:Q,closeupWithinMasonryEnabled:ee,peekCloseupEnabled:et}=(0,x.x4)(),{viewType:ea,viewParameter:ei}=(0,u.SU)(),eo=(0,_.Z)(),en=(0,v.q6)(eo,D?.pinner?.id,Y),[es,er]=(0,i.useState)(!!(0,y.mB)(q.search).share),[el,ed]=(0,i.useState)(!1),ec=(0,i.useCallback)(e=>ed(e),[]),ep=(0,i.useCallback)(()=>er(!1),[]),eu=(0,i.useCallback)(()=>er(e=>!e),[]),eh=D.board?.owner?.id||D.pinner?.id,{access:em=[],favorited_by_me:eg,reaction_counts:ey,section:e_}=D,eb=D?.board,{canPerformAction:ev}=(0,p.Z)({boardKey:null!=eb?{type:"deprecated",data:eb}:null}),ef=ev({action:4,viewer:eo})||em.includes("write")||em.includes("delete")||en,ex=ee?F:F||f.Gg,ew=(0,d.Z)({pinKey:{type:"deprecated",data:D},orbacActingAs:Y,viewer:eo}),eP=!!Object.keys(ey||{}).length,eA=!a&&ew,ek=q.state?.fromEggsBoard,eS=ee?T:g.default,eI=ee?E:r.default,ej=Z||a?null:(0,S.jsx)(h.Z,{name:"CloseupActionBar_SecondarySendButton",children:(0,S.jsx)(j,{closeupWithinMasonryEnabled:ee,controllerOptions:{flyoutDisplayOptions:ee?{shownWithinProfileHeader:!0,idealDirection:"down",forceDirection:!0}:{wrapperPosition:"fixed"},isFlyoutOpen:es,loggingOptions:{component:194,element:72,viewParameter:M||ei,viewType:H||ea},onFlyoutDismiss:ep,onToggleFlyout:eu,sendObject:{type:"pin",description:t,id:D.id,imageUrl:X,ownerId:eh,url:`/pin/${D.id}/`,clientTrackingParams:$}}})}),eC=(0,S.jsx)(n.xu,{alignItems:"center",color:ee?"transparent":"default","data-test-id":"closeup-action-items",display:"flex",justifyContent:"between",maxWidth:ex,rounding:2,children:(0,S.jsxs)(n.kC,{alignItems:"stretch",gap:ee?2:0,justifyContent:"start",children:[!en&&!!k&&(0,S.jsx)(h.Z,{name:"CloseupActionBar_ReactionPickerContainer",children:(0,S.jsxs)(n.xu,{alignItems:"center",display:"flex",marginEnd:eP?2:0,children:[(0,S.jsx)(C,{clientTrackingParams:$,handleReactionTrayHover:ec,idealDirection:ee?"down":void 0,pinId:D.id,reactionButtonSize:48,reactionByMe:D.reaction_by_me,reactionIconSize:20,showTooltip:!0,viewParameter:M,viewType:H}),(0,S.jsx)(eS,{pinId:D.id,reactionCounts:ey,showPrettyNumber:!0})]})}),ee&&(0,S.jsx)(R,{pinKey:{type:"deprecated",data:D}}),ej,(0,S.jsx)(n.xu,{children:(0,S.jsx)(n.xu,{"data-test-id":"closeup-more-options",children:(0,S.jsx)(eI,{carouselSlotCurrentIndex:D&&D.carousel_data&&D.carousel_data.index,clientTrackingParams:$,closeupWithinMasonryEnabled:ee,goBack:e,isReactionTrayOpen:el,onEditSubmit:B,pinKey:{type:"deprecated",data:D},showEditPin:eA,viewParameter:M,viewType:H})})}),ef&&!eA&&!J&&(0,S.jsx)(n.xu,{marginEnd:1,children:(0,S.jsx)(s.Z,{carouselSlotCurrentIndex:D&&D.carousel_data&&D.carousel_data.index,clientTrackingParams:$,onSubmit:B,pinId:D.id,view:3,viewParameter:M})}),!en&&eA&&!J&&(0,S.jsx)(n.xu,{"data-test-id":"closeup-favorite-button",children:(0,S.jsx)(n.u,{inline:!0,text:U._('Favorite', 'Closeup.Favorite.Icon', 'Icon for favoriting the current pin'),zIndex:O,children:(0,S.jsx)(l.default,{board:eb,favorited:!!eg,pinId:D.id,section:e_})})})]})}),eR=ee?void 0:L,eT=(0,S.jsx)(n.xu,{ref:K,color:"default",dangerouslySetInlineStyle:{__style:{paddingTop:L/2,paddingRight:eR,paddingBottom:ee?L/2:void 0,borderRadius:W?"0px 32px 32px 32px":Q?"0px 32px 32px 0":void 0}},"data-test-id":"closeup-body-sticky-content",marginTop:ee?0:W?-5:0,minHeight:J?void 0:60+L,width:ee?"100%":void 0,children:(0,S.jsx)(n.xu,{"data-test-id":"closeupActionBar",children:(0,S.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"between",children:[eC,(0,S.jsx)(n.kC,{alignItems:"center",gap:2,children:!a&&!en&&(0,S.jsx)(n.xu,{marginStart:ee?0:3,children:(0,S.jsx)(I,{boardCount:eo.isAuth?eo.boardCount:0,clientTrackingParams:$,fromEggsBoard:ek||!1,onClickCallback:z,pin:D,showEnabledSaveBehavior:V,showRepinOnInitialRender:N,variant:"closeup",viewParameter:M,viewType:H})})})]})})});if(G||ee)return eT;let eE=W&&!et?P.cI+4:P.hu;return et&&(eE=0),(0,S.jsx)(n.Le,{top:eE,zIndex:w.mS,children:eT})}},898514:function(e,t,a){a.d(t,{P:()=>l,Z:()=>c});var i,o=a(667294);a(167912);var n=a(494926),s=a(876459),r=a(907022);let l=e=>{let{action:t,viewer:a,board:i}=e;return!!i&&((0,n.Z)(a,i.owner?.entityId)||(0,s.Z)(i.collaboratedByMe,a)&&!!i.collaboratorPermissions?.includes(t))},d=void 0!==i?i:i=a(257775);function c({boardKey:e}){let t=(0,r.Z)(d,e),a=t?.owner?.entityId??"",i=(0,o.useMemo)(()=>t?.collaboratorPermissions,[t?.entityId]);return{canPerformAction:(0,o.useCallback)(({action:e,viewer:o})=>l({action:e,viewer:o,board:{collaboratedByMe:t?.collaboratedByMe,collaboratorPermissions:i,owner:a?{entityId:a}:null}}),[t?.collaboratedByMe,i,a])}}},765603:function(e,t,a){a.r(t),a.d(t,{default:()=>y});var i=a(667294),o=a(883119),n=a(361004),s=a(104999),r=a(507006),l=a(138596),d=a(729586),c=a(518596),p=a(825605),u=a(785893);function h(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let m=(0,i.lazy)(()=>a.e("25993").then(a.bind(a,581897)));class g extends i.PureComponent{constructor(...e){super(...e),h(this,"state",{displayAggregationModal:!1}),h(this,"showAggregationModal",()=>{let{disableModal:e,logContextEvent:t}=this.props;e||(this.setState({displayAggregationModal:!0}),t({event_type:101,view_type:3,view_parameter:139,component:13458,element:11435,aux_data:{objectId:this.props.pinId}}))}),h(this,"hideAggregationModal",()=>{this.setState({displayAggregationModal:!1})})}render(){let{displayAggregationModal:e}=this.state,{isBold:t,isStoryPin:a,paddingY:i,pinId:s,reactionCounts:l,showPrettyNumber:h}=this.props,g=l?(0,c.At)(l):null,y=l?(0,c.Ud)(l):0,_=!!g&&g.length>0&&g.filter(e=>!!d.GY[e]).map((e,t)=>{let a=e&&d.GY[e]?d.GY[e]:"",{label:i,gridAsset:n}=(0,d.fW)(a,this.props.i18n);return(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{marginRight:2}},children:(0,u.jsx)(o.xu,{height:19,width:19,children:n&&(0,u.jsx)(o.Ee,{alt:i??"",fit:"cover",naturalHeight:1,naturalWidth:1,src:n})})},t)});return(0,u.jsxs)(o.xu,{children:[(0,u.jsx)(o.iP,{accessibilityLabel:`${y} reactions`,dataTestId:"reactions-count-button",onTap:this.showAggregationModal,children:!!_&&(0,u.jsx)(o.xu,{"data-test-id":"aggregated-reactions-container",display:"inlineBlock",children:h?(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{cursor:"pointer"}},children:(0,u.jsx)(o.xv,{weight:"bold",children:(0,u.jsx)(r.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:y})})}):(0,u.jsxs)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{cursor:"pointer"}},"data-test-id":"aggregated-reactions-container",direction:"row",display:"flex",height:a?"auto":19,paddingY:i??(a?0:6),children:[(0,u.jsx)(o.kC,{alignItems:"stretch",direction:"row",justifyContent:"start",children:_}),(0,u.jsx)(o.xu,{paddingX:1,children:(0,u.jsx)(o.xv,{color:t?"default":"subtle",size:n.n,weight:t?"bold":"normal",children:(0,u.jsx)(r.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:y})})})]})})}),e&&y&&(0,u.jsx)(p.Z,{children:(0,u.jsx)(m,{aggregatedReactions:_,onDismiss:this.hideAggregationModal,pinId:s,totalReactionCount:y})})]})}}h(g,"defaultProps",{isBold:!0});let y=function(e){let t=(0,l.ZP)(),a=(0,s.Z)();return(0,u.jsx)(g,{...e,i18n:t,logContextEvent:a})}},729586:function(e,t,a){a.d(t,{GY:()=>x,Jg:()=>f,fW:()=>w});var i=a(827427),o=a(770943),n=a(624206),s=a(289714),r=a(707241),l=a(666043),d=a(26619),c=a(585372),p=a(50198),u=a(202511),h=a(123937),m=a(181018),g=a(749511),y=a(606166),_=a(906644),b=a(244771),v=a(220134);let f=["goodIdea","love","thanks","wow","haha"],x={7:"goodIdea",1:"love",13:"thanks",11:"wow",5:"haha"},w=(e,t,a="darkGray")=>{let f={default:{staticAsset:"white"===a?h:u},goodIdea:{staticAsset:n,animatedAsset:i,gridAsset:o,label:t._('Good idea', 'Reaction label to tell a creator that their pin is a good idea', 'Reaction label to tell a creator that their pin is a good idea'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:7},haha:{staticAsset:l,animatedAsset:s,gridAsset:r,label:t._('Haha', 'Reaction label to tell a creator that the pinner laughed because of their pin', 'Reaction label to tell a creator that the pinner laughed because of their pin'),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:5},love:{staticAsset:p,animatedAsset:d,gridAsset:c,label:t._('Love', 'Reaction label to tell a creator that the pinner loved their pin', 'Reaction label to tell a creator that the pinner loved their pin'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:1},thanks:{staticAsset:y,animatedAsset:m,gridAsset:g,label:t._('Thanks', 'Reaction label to tell a creator thank you', 'Reaction label to tell a creator thank you'),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:13},wow:{staticAsset:v,animatedAsset:_,gridAsset:b,label:t._('Wow', 'Reaction label to tell a creator that the pinner was wowed by their pin', 'Reaction label to tell a creator that the pinner was wowed by their pin'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:11}};return e&&f[e]?f[e]:f.default}},504727:function(e,t,a){a.d(t,{tY:()=>p,ZP:()=>l,$7:()=>u,Yh:()=>c,Xt:()=>d});var i=a(581722),o=a(613567),n=a(661376),s=a(462867);let r={SAVE_TO_PROFILE:0,SHOW_BOARD_PICKER:1};function l(e){let t=(0,s.Z)(),a=t.isAuth&&t.id===e,{checkExperiment:i}=(0,o.F)(),r=(0,n.Z)(!t.isAuth||a?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{showEnabledSaveBehavior:a&&t.has_quicksave_board||!!(t.isAuth&&(r??{}).data?.has_quicksave_board)||(a||t.isAuth)&&!t.has_quicksave_board&&!(r??{}).data?.has_quicksave_board&&i("profile_saves_for_all").anyEnabled}}function d(e){let t=(0,s.Z)(),a=t.isAuth&&t.id===e,i=(0,n.Z)(!t.isAuth||a?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{boardlessPinsEnabled:a&&t.has_quicksave_board||!!(t.isAuth&&(i??{}).data?.has_quicksave_board)}}function c(e){let t=(0,i.I0)(),a=(0,s.Z)(),o=a.isAuth&&!!a.boardCount&&a.boardCount<5&&e,r=(0,n.Z)(o&&e?{name:"UserResource",options:{field_set_key:"save_behavior",user_id:a.isAuth&&a.id}}:null);return a.isAuth&&void 0===a.save_behavior&&r&&r.data?.id&&t({type:"UPDATE_USER_SAVE_BEHAVIOR",payload:{saveBehavior:r.data.save_behavior}}),{showEnabledSaveBehavior:o}}function p(e){let t;let a=(0,s.Z)();return e&&(a.save_behavior===r.SAVE_TO_PROFILE?t={type:"classic"}:a.save_behavior===r.SHOW_BOARD_PICKER&&(t={type:"inline"})),{saveBehaviorType:t}}function u(){let e=(0,s.Z)();return e.isAuth&&(e?.secretBoardCount??0)>0}},985543:function(e,t,a){a.d(t,{X:()=>c,f:()=>d});var i=a(667294),o=a(213491),n=a(566431);function s(e=null,t){switch(t.type){case"REPORT_CONTENT_SHOW":return{id:t.payload.id,auxData:t.payload.auxData,isProduct:t.payload.isProduct,isPromoted:t.payload.isPromoted,parentId:t.payload.parentId,videoDuration:t.payload.videoDuration,viewParameter:t.payload.viewParameter,viewType:t.payload.viewType,type:t.payload.type,isThirdPartyAd:t.payload.isThirdPartyAd,nodeId:t.payload.nodeId};case"REPORT_CONTENT_DISMISS":return null;default:return e}}var r=a(785893);let{Provider:l,useHook:d}=(0,o.Z)("ReportData");function c({children:e}){let[t,a]=(0,i.useReducer)(s,null),o=(0,i.useCallback)(()=>a({type:"REPORT_CONTENT_DISMISS"}),[]),d=(0,i.useCallback)((e,t,i)=>a({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,parentId:t,videoDuration:null,viewParameter:null,viewType:null,type:i,nodeId:null}}),[]),c=(0,i.useCallback)((e,t,i)=>a({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:i,type:"conversation",nodeId:null}}),[]),p=(0,i.useCallback)(({id:e,viewParameter:t,viewType:i,nodeId:o})=>a({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:i,type:"pin",nodeId:o}}),[]),u=(0,i.useCallback)(({pinId:e,isDownstreamPromotion:t,hasPromoter:i,firstVideoDuration:o,isProduct:s,viewParameter:r,viewType:l,isThirdPartyAd:d,nodeId:c,auxData:p})=>{a({type:"REPORT_CONTENT_SHOW",payload:{id:e,auxData:p,isProduct:s,isPromoted:(0,n.jL)(t,i),videoDuration:o,viewParameter:r,viewType:l,type:"pin",isThirdPartyAd:d,nodeId:c}})},[]),h=(0,i.useMemo)(()=>({reportData:t,dismiss:o,reportComment:d,reportConversation:c,reportImage:p,reportPin:u}),[t,o,d,c,p,u]);return(0,r.jsx)(l,{value:h,children:e})}},827427:function(e){e.exports="https://s.pinimg.com/webapp/goodIdeaAnimated-5de05cb7.svg"},770943:function(e){e.exports="https://s.pinimg.com/webapp/goodIdeaGrid-e3e37a7f.svg"},624206:function(e){e.exports="https://s.pinimg.com/webapp/goodIdeaStatic-855554b0.svg"},289714:function(e){e.exports="https://s.pinimg.com/webapp/hahaAnimated-df9cb2fa.svg"},707241:function(e){e.exports="https://s.pinimg.com/webapp/hahaGrid-7945c718.svg"},666043:function(e){e.exports="https://s.pinimg.com/webapp/hahaStatic-28ee6e1e.svg"},26619:function(e){e.exports="https://s.pinimg.com/webapp/loveAnimated-ccd5b808.svg"},585372:function(e){e.exports="https://s.pinimg.com/webapp/loveGrid-1ec7b8e4.svg"},50198:function(e){e.exports="https://s.pinimg.com/webapp/loveStatic-31fc2a99.svg"},202511:function(e){e.exports="https://s.pinimg.com/webapp/reactionHeartOutline-24ab75a6.svg"},123937:function(e){e.exports="https://s.pinimg.com/webapp/reactionHeartOutlineWhite-61cdbdb7.svg"},181018:function(e){e.exports="https://s.pinimg.com/webapp/thanksAnimated-6831daf3.svg"},749511:function(e){e.exports="https://s.pinimg.com/webapp/thanksGrid-b3cf8b93.svg"},606166:function(e){e.exports="https://s.pinimg.com/webapp/thanksStatic-51f19932.svg"},906644:function(e){e.exports="https://s.pinimg.com/webapp/wowAnimated-b776449f.svg"},244771:function(e){e.exports="https://s.pinimg.com/webapp/wowGrid-9e62e75a.svg"},220134:function(e){e.exports="https://s.pinimg.com/webapp/wowStatic-d966adbd.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/CloseupActionBarCommon-77f2577325335316.mjs.map