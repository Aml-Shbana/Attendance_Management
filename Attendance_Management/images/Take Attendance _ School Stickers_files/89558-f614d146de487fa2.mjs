(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["89558"],{872901:function(e,t,i){i.r(t),i.d(t,{default:()=>I});var n=i(667294),o=i(581722),a=i(883119),r=i(27399),s=i(785893);let l="cubic-bezier(0, 0, 0.58, 1)",c={loaded:{opacity:1,transitionDuration:"0.20s",transitionTimingFunction:l,transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"},fade:{opacity:.1,transitionDuration:"0.30s",transitionTimingFunction:l,transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"}};function p({reactionLabel:e,handleHideConfirmation:t}){let[i,o]=(0,n.useState)("loaded"),r=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e,i;return r.current=requestAnimationFrame(()=>{e=setTimeout(()=>o("fade"),1e3),i=setTimeout(()=>t(),1300)}),function(){clearTimeout(e),clearTimeout(i)}},[]),(0,s.jsx)(a.xu,{alignItems:"center",display:"flex",justifyContent:"center",position:"relative",children:(0,s.jsx)(a.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{...c[i],whiteSpace:"nowrap"}},display:"flex",height:20,justifyContent:"center",paddingX:2,paddingY:1,position:"absolute",rounding:"pill",zIndex:new a.Ry(2),children:(0,s.jsx)(a.xv,{color:"inverse",overflow:"normal",size:"100",weight:"bold",children:e})})})}var d=i(138596),h=i(59111),u=i(729586),f=i(133546);let m={icon:{backgroundRepeat:"no-repeat",backgroundSize:"cover"},loading:{opacity:0,transitionDuration:"0.25s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1) translateZ(0) translateY(25px)",transformOrigin:"bottom"},loaded:{opacity:1,transitionDuration:"0.2s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1)",transformOrigin:"bottom"},clicked:{transition:"transform 0.2s ease-out",transform:"translateY(-30px) scaleX(1.6) scaleY(1.6)",transformOrigin:"bottom",position:"relative",zIndex:1},flying:{transition:"transform 0.2s ease-out",transformOrigin:"bottom"},label:{transition:"transform 0.2s ease-out",transform:"scale(0.625)",transformOrigin:"bottom",whiteSpace:"nowrap"},fading:{opacity:0,transition:"opacity 0.2s ease-out"}},g={boxShadow:"0 9px 26px rgba(0, 0, 0, 0.4)"};function y({reactionButtonRect:e,handleReactionTrayClick:t,shouldShowReactionTrayUp:i}){let o=(0,d.ZP)(),r=(0,n.useRef)(null),[l,c]=(0,n.useState)("loading"),[p,y]=(0,n.useState)(""),[x,_]=(0,n.useState)(),{closeupWithinMasonryEnabled:b}=(0,f.x4)(),[v,w]=(0,n.useState)(!1),[S,R]=(0,n.useState)(!1),[T,k]=(0,n.useState)({}),[j]=(0,n.useState)(e),[A,C]=(0,n.useState)(-150),I=(0,n.useRef)(),E=(0,n.useRef)({}),O=r.current?.getBoundingClientRect();(0,n.useEffect)(()=>{O?.right&&O?.right>(window.innerWidth||document.documentElement?.clientWidth)&&(-276!==A?R(!0):R(!1),C(-276))},[O?.right,A,b]);let P=()=>{w(!0);let e={...T};u.Jg.forEach(t=>{E.current[t]&&(!e[t]||S)&&(e[t]=E.current[t].getBoundingClientRect())}),Object.keys(e).length===u.Jg.length&&k(e)},z=()=>{let e={...x};u.Jg.forEach(t=>{let i=T[t],{left:n,top:o}=j,{left:a,top:r}=i;e[t]={translateX:n-a+-8,translateY:o-r+9}}),_(e)};(0,n.useEffect)(()=>{"loading"===l&&(I.current=requestAnimationFrame(()=>c("loaded"))),P(),!x&&v&&z()},[v,A,e]);let B=()=>{"clicked"===l&&p&&(c("flying"),setTimeout(()=>{t(p)},750))},D=u.Jg.map((e,t)=>{let{staticAsset:i,animatedAsset:n,label:r,htmlStyle:c,animationStyle:d}=(0,u.fW)(e,o),f={loadedStyle:{transitionDelay:`${.08*t}s`,...m[l]},clickedStyle:{...p===e?m.clicked:m.loaded},flyingStyle:{...x&&p===e?{transform:`translateZ(0) translateX(${x[e].translateX}px) translateY(${x[e].translateY}px) scaleX(0.6) scaleY(0.6) `,...m[l]}:m.fading}},g={};return"loading"===l||"loaded"===l?g={...f.loadedStyle}:"clicked"===l?g={...f.clickedStyle}:"flying"===l&&(g={...f.flyingStyle}),(0,s.jsx)(a.xu,{alignSelf:"center",display:"flex",justifyContent:"between",children:(0,s.jsxs)(a.xu,{ref:t=>{E.current[e]=t},alignItems:"center",dangerouslySetInlineStyle:{__style:{...g}},display:"flex",justifyContent:"center",maxHeight:40,maxWidth:40,overflow:"visible",position:"relative",children:[p!==e&&(0,s.jsx)(a.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,s.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${i})`,backgroundPosiiton:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}},height:40,width:40})}),(0,s.jsxs)(a.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",position:"relative",children:[(0,s.jsx)(h.Z,{unsafeCSS:c}),p===e&&"clicked"===l&&(0,s.jsx)(a.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:m.label},display:"flex",height:20,justifyContent:"center",paddingX:2,paddingY:1,rounding:"pill",children:(0,s.jsx)(a.xv,{color:"inverse",overflow:"normal",size:"100",weight:"bold",children:r})}),(0,s.jsx)("div",{onClick:B,onKeyDown:B,role:"presentation",children:(0,s.jsx)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...m.icon,...p===e&&"clicked"===l?{animation:d}:{},backgroundImage:`url(${n})`}},display:"flex",height:40,justifyContent:"center",width:40})})]})]})},t)}),H=e=>{let t;return v&&u.Jg.forEach(i=>{let n=T[i];if(n&&n.left&&n.right){let{left:o,right:a}=n;e>=o&&e<=a&&(t=i)}}),t||null};return(0,s.jsx)(a.xu,{ref:r,alignItems:"center",dangerouslySetInlineStyle:{__style:{marginLeft:b?void 0:A,marginTop:!b&&i?-(80+j.height):0}},display:"flex",justifyContent:"center",position:b?void 0:"absolute",children:(0,s.jsx)(a.xu,{alignItems:"center",color:"flying"===l?"transparent":"default",dangerouslySetInlineStyle:{__style:{...b||"flying"===l?{}:g}},display:"flex",height:80,justifyContent:"center",onMouseMove:e=>{let{clientX:t}=e;if(r.current){let e=b?t-r.current.getBoundingClientRect().left:t;if("flying"!==l){let t=H(e);t!==p&&y(t),c("clicked")}}},rounding:"pill",width:300,children:(0,s.jsx)(a.xu,{alignItems:"center",display:"flex",justifyContent:"around",paddingX:5,width:"100%",children:D})})})}var x=i(230201),_=i(943152),b=i(521367),v=i(613567),w=i(462867),S=i(200619),R=i(601871),T=i(15392),k=i(228404);function j(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function A({children:e,showTooltip:t,tooltipText:i}){return t?(0,s.jsx)(a.u,{inline:!0,text:i,zIndex:new a.Ry(2),children:e}):e}class C extends n.PureComponent{constructor(...e){super(...e),j(this,"state",{isConfirmationShowing:!1,isHoveringOverTray:!1,isReactionTrayShowing:!1,reactionButtonRect:null,active:!1}),j(this,"reactionButtonRef",(0,n.createRef)()),j(this,"tooltipExperience",{}),j(this,"trayOpenTimer",null),j(this,"trayCloseTimer",null),j(this,"isHoveringOverButton",!1),j(this,"handleExperienceMount",e=>{e&&e.complete&&(501977===e.experience_id||501995===e.experience_id)&&(this.tooltipExperience=e)}),j(this,"handleReactForAuthViewer",(e=7)=>{let{clientTrackingParams:t,pinId:i,pinUpdateReactionCount:n,reactionByMe:o}=this.props,a={pin_id:i,reaction_type:e,client_tracking_params:t,...this.props.orbacSubjectId?{orbac_subject_id:this.props.orbacSubjectId}:Object.freeze({})};o&&n(i,!1,o),n(i,!0,e),r.Z.create("ReactionsResource",a).callUpdate()}),j(this,"handleUnreactForAuthViewer",()=>{let{clientTrackingParams:e,pinId:t}=this.props,i={pin_id:t,client_tracking_params:e,...this.props.orbacSubjectId?{orbac_subject_id:this.props.orbacSubjectId}:Object.freeze({})};r.Z.create("ReactionsResource",i).callDelete()}),j(this,"setReactionButtonRect",()=>{if(this.reactionButtonRef?.current&&this.reactionButtonRef.current instanceof HTMLElement){let e=this.reactionButtonRef.current.getBoundingClientRect();this.setState({reactionButtonRect:e})}}),j(this,"openTrayWithDelay",()=>{let{handleReactionTrayHover:e}=this.props;setTimeout(()=>{this.isHoveringOverButton&&(this.setState({isReactionTrayShowing:!0}),e&&e(!0),this.tooltipExperience&&this.tooltipExperience.complete&&this.tooltipExperience.complete())},1e3)}),j(this,"closeTray",()=>{let{handleReactionTrayHover:e}=this.props;this.setState({isReactionTrayShowing:!1}),e&&e(!1)}),j(this,"startTrayCloseTimer",()=>{this.trayCloseTimer&&clearTimeout(this.trayCloseTimer),this.trayCloseTimer=setTimeout(()=>{let{isHoveringOverTray:e}=this.state;e||this.isHoveringOverButton||this.closeTray()},300)}),j(this,"handleOnHoverTray",()=>{this.setState({isHoveringOverTray:!0})}),j(this,"handleExitTrayWithDelay",()=>{this.setState({isHoveringOverTray:!1}),this.startTrayCloseTimer()}),j(this,"handleClickButton",()=>{let{clientTrackingParams:e,requireAuth:t,component:i,pinId:n,pinUpdateReactionCount:o,reactionByMe:a,viewParameter:r,viewType:s,logContextEvent:l}=this.props;a?(o(n,!1,a),t?t():this.handleUnreactForAuthViewer()):this.setReaction("love"),this.closeTray(),l({event_type:101,view_type:s||3,view_parameter:r||139,...i?{component:i}:Object.freeze({}),element:11354,object_id_str:n,clientTrackingParams:e})}),j(this,"setReaction",e=>{let{requireAuth:t,i18n:i}=this.props;t?t():this.handleReactForAuthViewer((0,u.fW)(e,i).type),this.handleShowConfirmation()}),j(this,"handleShowConfirmation",()=>{this.setState({isConfirmationShowing:!0})}),j(this,"handleHideConfirmation",()=>{this.setState({isConfirmationShowing:!1},this.startTrayCloseTimer)})}componentDidMount(){this.setReactionButtonRect(),window.addEventListener("mouseover",this.setReactionButtonRect)}componentWillUnmount(){this.trayOpenTimer&&clearTimeout(this.trayOpenTimer),this.trayCloseTimer&&clearTimeout(this.trayCloseTimer),window.removeEventListener("mouseover",this.setReactionButtonRect)}render(){let{isReactionTrayShowing:e,reactionButtonRect:t,isConfirmationShowing:i}=this.state,{iconColor:n="darkGray",idealDirection:o,reactionByMe:r,shouldShowReactionTrayUp:l=!1,showBackground:c,showTooltip:d,reactionButtonSize:h,reactionIconSize:f,closeupWithinMasonryEnabled:m}=this.props,g=r&&u.GY[r]?u.GY[r]:"default",{staticAsset:x,label:_}=(0,u.fW)(g,this.props.i18n,n),v=e&&!!t&&!!t.left&&!!t.top&&(0,s.jsx)(y,{handleReactionTrayClick:this.setReaction,reactionButtonRect:t,shouldShowReactionTrayUp:l});return(0,s.jsxs)(a.xu,{position:"relative",children:[(0,s.jsx)(A,{showTooltip:!i||!this.props.checkExperiment("ce_dweb_pin_reaction_simplification").anyEnabled,tooltipText:this.props.i18n._('React', 'Closeup.ReactionPicker.Icon', 'Icon for reacting to current pin'),children:(0,s.jsx)(a.iP,{ref:this.reactionButtonRef,accessibilityLabel:"reaction",dataTestId:"react-button",onBlur:()=>{this.setState({active:!1})},onMouseEnter:()=>{this.isHoveringOverButton=!0,this.setState({active:!0}),this.props.checkExperiment("ce_dweb_pin_reaction_simplification").anyEnabled||this.openTrayWithDelay()},onMouseLeave:()=>{this.isHoveringOverButton=!1,this.setState({active:!1}),this.startTrayCloseTimer()},onTap:this.handleClickButton,rounding:"circle",children:(0,s.jsx)(a.xu,{color:c?"secondary":m?"transparent":"default",dangerouslySetInlineStyle:{__style:{...this.state.active?{backgroundColor:"#E9E9E9"}:{}}},rounding:"circle",children:(0,s.jsx)(a.kC,{alignItems:"center",justifyContent:"center",minHeight:h,minWidth:h,children:(0,s.jsx)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosiiton:"center",backgroundImage:`url(${x})`}},display:"flex",height:f,justifyContent:"center",width:f})})})})}),d&&!e&&!i&&(0,s.jsx)(b.mc,{anchor:this.reactionButtonRef?.current,experienceIds:[501977,501995],flyoutSize:"sm",idealDirection:"down",onExperienceMount:this.handleExperienceMount,placementId:12}),e&&!!t&&!!t.left&&!!t.top&&(0,s.jsx)(a.kC,{alignItems:"center",justifyContent:"center",children:(0,s.jsx)(a.Le,{top:0,children:(0,s.jsx)(a.iP,{onMouseEnter:this.handleOnHoverTray,onMouseLeave:this.handleExitTrayWithDelay,onTap:this.handleExitTrayWithDelay,children:m?(0,s.jsx)(a.mh,{zIndex:new a.Ry(T.rv),children:(0,s.jsx)(a.J2,{__overflow:"visible",anchor:this.reactionButtonRef?.current,idealDirection:o,onDismiss:this.closeTray,positionRelativeToAnchor:!1,size:"xl",children:v})}):v})})}),!m&&i&&!!r&&_&&(0,s.jsx)(p,{handleHideConfirmation:this.handleHideConfirmation,reactionLabel:_})]})}}function I(e){let{logContextEvent:t}=(0,x.v)(),i=(0,d.ZP)(),n=(0,_.Z)(),a=(0,S.Z)(),r=(0,w.Z)(),l=(0,R.lJ)(r,a),c=(0,o.I0)(),{closeupWithinMasonryEnabled:p}=(0,f.x4)(),{checkExperiment:h}=(0,v.F)();return(0,s.jsx)(C,{...e,checkExperiment:h,closeupWithinMasonryEnabled:p,i18n:i,logContextEvent:t,orbacSubjectId:l,pinUpdateReactionCount:(e,t,i)=>c((0,k.fA)(e,t,i)),requireAuth:n})}j(C,"defaultProps",{reactionButtonSize:44,reactionIconSize:24})},729586:function(e,t,i){i.d(t,{GY:()=>v,Jg:()=>b,fW:()=>w});var n=i(827427),o=i(770943),a=i(624206),r=i(289714),s=i(707241),l=i(666043),c=i(26619),p=i(585372),d=i(50198),h=i(202511),u=i(123937),f=i(181018),m=i(749511),g=i(606166),y=i(906644),x=i(244771),_=i(220134);let b=["goodIdea","love","thanks","wow","haha"],v={7:"goodIdea",1:"love",13:"thanks",11:"wow",5:"haha"},w=(e,t,i="darkGray")=>{let b={default:{staticAsset:"white"===i?u:h},goodIdea:{staticAsset:a,animatedAsset:n,gridAsset:o,label:t._('Good idea', 'Reaction label to tell a creator that their pin is a good idea', 'Reaction label to tell a creator that their pin is a good idea'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:7},haha:{staticAsset:l,animatedAsset:r,gridAsset:s,label:t._('Haha', 'Reaction label to tell a creator that the pinner laughed because of their pin', 'Reaction label to tell a creator that the pinner laughed because of their pin'),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:5},love:{staticAsset:d,animatedAsset:c,gridAsset:p,label:t._('Love', 'Reaction label to tell a creator that the pinner loved their pin', 'Reaction label to tell a creator that the pinner loved their pin'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:1},thanks:{staticAsset:g,animatedAsset:f,gridAsset:m,label:t._('Thanks', 'Reaction label to tell a creator thank you', 'Reaction label to tell a creator thank you'),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:13},wow:{staticAsset:_,animatedAsset:y,gridAsset:x,label:t._('Wow', 'Reaction label to tell a creator that the pinner was wowed by their pin', 'Reaction label to tell a creator that the pinner was wowed by their pin'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:11}};return e&&b[e]?b[e]:b.default}},228404:function(e,t,i){i.d(t,{G3:()=>d,Gy:()=>p,Ps:()=>l,fA:()=>h,xQ:()=>c});var n=i(782677),o=i(27399),a=i(660322),r=i(407775);function s(e,t,i){return{type:"UPDATE_PIN_REACTION_COUNT",payload:{increment:t,reactionType:i,pinId:e}}}function l(e,t){return s(e,!1,t)}function c(e,t){return s(e,!0,t)}let p=(e,t,i,s,l)=>c=>{let p={pin_id:e,user_id:s,reaction_type:t,reaction_pin_id:i,action_type:"reaction",client_tracking_parameters:l},d="ReactionsResource";return o.Z.create(d,p).callUpdate().then(e=>{let t=(0,n.Fv)(e.resource_response.data,r.Z[d]);c((0,a.XM)(d,p,e,t))})},d=(e,t,i,s)=>l=>{let c={pin_id:e,user_id:i,reaction_pin_id:t,action_type:"unreaction",client_tracking_parameters:s},p="ReactionsResource";return o.Z.create(p,c).callDelete().then(e=>{let t=(0,n.Fv)(e.resource_response.data,r.Z[p]);l((0,a.XM)(p,c,e,t))})};function h(e,t,i){return{type:"PIN_UPDATE_REACTION_COUNT",payload:{id:e,increment:t,reactionType:i}}}},827427:function(e){e.exports="https://s.pinimg.com/webapp/goodIdeaAnimated-5de05cb7.svg"},770943:function(e){e.exports="https://s.pinimg.com/webapp/goodIdeaGrid-e3e37a7f.svg"},624206:function(e){e.exports="https://s.pinimg.com/webapp/goodIdeaStatic-855554b0.svg"},289714:function(e){e.exports="https://s.pinimg.com/webapp/hahaAnimated-df9cb2fa.svg"},707241:function(e){e.exports="https://s.pinimg.com/webapp/hahaGrid-7945c718.svg"},666043:function(e){e.exports="https://s.pinimg.com/webapp/hahaStatic-28ee6e1e.svg"},26619:function(e){e.exports="https://s.pinimg.com/webapp/loveAnimated-ccd5b808.svg"},585372:function(e){e.exports="https://s.pinimg.com/webapp/loveGrid-1ec7b8e4.svg"},50198:function(e){e.exports="https://s.pinimg.com/webapp/loveStatic-31fc2a99.svg"},202511:function(e){e.exports="https://s.pinimg.com/webapp/reactionHeartOutline-24ab75a6.svg"},123937:function(e){e.exports="https://s.pinimg.com/webapp/reactionHeartOutlineWhite-61cdbdb7.svg"},181018:function(e){e.exports="https://s.pinimg.com/webapp/thanksAnimated-6831daf3.svg"},749511:function(e){e.exports="https://s.pinimg.com/webapp/thanksGrid-b3cf8b93.svg"},606166:function(e){e.exports="https://s.pinimg.com/webapp/thanksStatic-51f19932.svg"},906644:function(e){e.exports="https://s.pinimg.com/webapp/wowAnimated-b776449f.svg"},244771:function(e){e.exports="https://s.pinimg.com/webapp/wowGrid-9e62e75a.svg"},220134:function(e){e.exports="https://s.pinimg.com/webapp/wowStatic-d966adbd.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/89558-f614d146de487fa2.mjs.map